<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1.2 容器概述 | Spring 框架中文手册</title>
    <meta name="generator" content="VuePress 1.5.1">
    <link rel="ico" href="/spring-framework-chinese/logo.png">
    <link rel="shortcut icon" href="/spring-framework-chinese/favicon.ico">
    <meta name="description" content="Spring 框架中文手册">
    <link rel="preload" href="/spring-framework-chinese/assets/css/0.styles.ebcbd2a1.css" as="style"><link rel="preload" href="/spring-framework-chinese/assets/js/app.7f7a7551.js" as="script"><link rel="preload" href="/spring-framework-chinese/assets/js/2.50df17b9.js" as="script"><link rel="preload" href="/spring-framework-chinese/assets/js/16.e0e832a3.js" as="script"><link rel="preload" href="/spring-framework-chinese/assets/js/4.ef7c169f.js" as="script"><link rel="preload" href="/spring-framework-chinese/assets/js/3.d523927b.js" as="script"><link rel="prefetch" href="/spring-framework-chinese/assets/js/10.bfc83172.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/11.01ae9702.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/12.10b8ba23.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/13.e82d4854.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/14.8313c1a2.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/15.2ae7b002.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/17.2ac8ca66.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/18.94516c40.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/19.4c271218.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/20.a49db269.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/21.44ab8b0e.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/22.a8c84864.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/23.c8a4bbda.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/24.ec68a7e9.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/25.b82d2a58.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/26.857b0aca.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/27.f0532bc8.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/28.3604dbff.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/29.39def84e.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/30.b03eb723.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/31.ed3a9e10.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/32.a85bf573.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/33.ae28b0b7.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/34.9e88e78d.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/35.1e131310.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/36.f5ea134b.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/37.289125ac.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/38.d6a7ff10.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/39.5103f2a4.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/40.0c84c838.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/41.5fe6029c.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/42.1ca496bf.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/43.e9955b9f.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/44.fd3dd778.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/45.1c292044.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/46.d899fc4e.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/47.a53a7ed9.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/48.f6e31a7d.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/49.5141b329.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/5.4f4be299.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/50.1ec4c777.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/51.b36b6f2d.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/52.82f72052.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/53.61ada9ad.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/54.173030d1.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/55.b40ceaae.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/56.744714ce.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/57.c382a8d1.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/58.71898093.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/59.3462396b.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/6.e7c33066.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/60.35f162e9.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/61.65e5fe66.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/62.6d332bf6.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/63.2bfad0b1.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/64.1dd0856d.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/65.c9e0f313.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/66.169906cd.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/7.d98cbe58.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/8.6c18462c.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/9.8e904536.js">
    <link rel="stylesheet" href="/spring-framework-chinese/assets/css/0.styles.ebcbd2a1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/spring-framework-chinese/" class="home-link router-link-active"><!----> <span class="site-name">Spring 框架中文手册</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/spring-framework-chinese/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/spring-framework-chinese/overview/" class="nav-link">
  概述
</a></div><div class="nav-item"><a href="/spring-framework-chinese/core/" class="nav-link router-link-active">
  核心
</a></div><div class="nav-item"><a href="/spring-framework-chinese/testing/" class="nav-link">
  测试
</a></div><div class="nav-item"><a href="/spring-framework-chinese/data-access/" class="nav-link">
  数据访问
</a></div><div class="nav-item"><a href="/spring-framework-chinese/web-servlet/" class="nav-link">
  Web Servlet
</a></div><div class="nav-item"><a href="/spring-framework-chinese/web-reactive/" class="nav-link">
  Web Reactive
</a></div><div class="nav-item"><a href="/spring-framework-chinese/integration/" class="nav-link">
  集成
</a></div><div class="nav-item"><a href="/spring-framework-chinese/languages/" class="nav-link">
  语言
</a></div><div class="nav-item"><a href="https://github.com/jaylinh-com/spring-framework-chinese" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="切换语言" class="dropdown-title"><span class="title">切换语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/spring-framework-chinese/core/1.2 beans-basics.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/spring-framework-chinese/en/core/1.2 beans-basics.html" class="nav-link">
  English
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/spring-framework-chinese/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/spring-framework-chinese/overview/" class="nav-link">
  概述
</a></div><div class="nav-item"><a href="/spring-framework-chinese/core/" class="nav-link router-link-active">
  核心
</a></div><div class="nav-item"><a href="/spring-framework-chinese/testing/" class="nav-link">
  测试
</a></div><div class="nav-item"><a href="/spring-framework-chinese/data-access/" class="nav-link">
  数据访问
</a></div><div class="nav-item"><a href="/spring-framework-chinese/web-servlet/" class="nav-link">
  Web Servlet
</a></div><div class="nav-item"><a href="/spring-framework-chinese/web-reactive/" class="nav-link">
  Web Reactive
</a></div><div class="nav-item"><a href="/spring-framework-chinese/integration/" class="nav-link">
  集成
</a></div><div class="nav-item"><a href="/spring-framework-chinese/languages/" class="nav-link">
  语言
</a></div><div class="nav-item"><a href="https://github.com/jaylinh-com/spring-framework-chinese" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="切换语言" class="dropdown-title"><span class="title">切换语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/spring-framework-chinese/core/1.2 beans-basics.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/spring-framework-chinese/en/core/1.2 beans-basics.html" class="nav-link">
  English
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/spring-framework-chinese/core/" class="sidebar-heading clickable router-link-active open"><span>1. Ioc 容器</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/spring-framework-chinese/core/1.1 beans-introduction.html" class="sidebar-link">1.1. spring ioc 容器和 beans 介绍</a></li><li><a href="/spring-framework-chinese/core/1.2 beans-basics.html" class="active sidebar-link">1.2. 容器概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring-framework-chinese/core/1.2 beans-basics.html#_1-2-1-元数据配置" class="sidebar-link">1.2.1 元数据配置</a></li><li class="sidebar-sub-header"><a href="/spring-framework-chinese/core/1.2 beans-basics.html#_1-2-2-实例化容器" class="sidebar-link">1.2.2 实例化容器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring-framework-chinese/core/1.2 beans-basics.html#组成基于xml的配置元数据" class="sidebar-link">组成基于XML的配置元数据</a></li><li class="sidebar-sub-header"><a href="/spring-framework-chinese/core/1.2 beans-basics.html#groovy-bean-定义dsl" class="sidebar-link">Groovy Bean 定义DSL</a></li></ul></li><li class="sidebar-sub-header"><a href="/spring-framework-chinese/core/1.2 beans-basics.html#_1-2-3-容器的使用" class="sidebar-link">1.2.3 容器的使用</a></li></ul></li><li><a href="/spring-framework-chinese/core/1.3 beans-definition.html" class="sidebar-link">1.3. Beans 概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring-framework-chinese/core/1.3 beans-definition.html#_1-3-1-命名-bean" class="sidebar-link">1.3.1 命名 Bean</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring-framework-chinese/core/1.3 beans-definition.html#为-bean-定义外部的-bean-指定别名" class="sidebar-link">为 Bean 定义外部的 Bean 指定别名</a></li></ul></li><li class="sidebar-sub-header"><a href="/spring-framework-chinese/core/1.3 beans-definition.html#_1-3-2-实例化-bean" class="sidebar-link">1.3.2 实例化 Bean</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring-framework-chinese/core/1.3 beans-definition.html#使用构造函数实例化" class="sidebar-link">使用构造函数实例化</a></li><li class="sidebar-sub-header"><a href="/spring-framework-chinese/core/1.3 beans-definition.html#使用静态工厂方法实例化" class="sidebar-link">使用静态工厂方法实例化</a></li><li class="sidebar-sub-header"><a href="/spring-framework-chinese/core/1.3 beans-definition.html#使用实例工厂方法进行实例化" class="sidebar-link">使用实例工厂方法进行实例化</a></li><li class="sidebar-sub-header"><a href="/spring-framework-chinese/core/1.3 beans-definition.html#确定-bean-的运行时类型" class="sidebar-link">确定 Bean 的运行时类型</a></li></ul></li></ul></li><li><a href="/spring-framework-chinese/core/1.4 beans-dependencies.html" class="sidebar-link">1.4. 依赖</a></li><li><a href="/spring-framework-chinese/core/1.5 beans-factory-scopes.html" class="sidebar-link">1.5. Beans 作用域</a></li><li><a href="/spring-framework-chinese/core/1.6 beans-factory-nature.html" class="sidebar-link">1.6. 自定义 bean 的性质</a></li><li><a href="/spring-framework-chinese/core/1.7 Bean Definition Inheritance.html" class="sidebar-link">1.7. Bean 定义的继承</a></li><li><a href="/spring-framework-chinese/core/1.8 Container Extension Points.html" class="sidebar-link">1.8. 容器扩展点</a></li><li><a href="/spring-framework-chinese/core/1.9 Annotation-based Container Configuration.html" class="sidebar-link">1.9. 基于注解的容器配置</a></li><li><a href="/spring-framework-chinese/core/1.10 Classpath Scanning and Managed Components.html" class="sidebar-link">1.10. classpath 扫描和组件管理</a></li><li><a href="/spring-framework-chinese/core/1.11 Using JSR 330 Standard Annotations.html" class="sidebar-link">1.11. 使用 JSR330 标准注解</a></li><li><a href="/spring-framework-chinese/core/1.12 Java-based Container Configuration.html" class="sidebar-link">1.12. 基于Java的容器配置</a></li><li><a href="/spring-framework-chinese/core/1.13 Environment Abstraction.html" class="sidebar-link">1.13. 环境抽象</a></li><li><a href="/spring-framework-chinese/core/1.14 Registering a LoadTimeWeaver.html" class="sidebar-link">1.14. 注册 LoadTimeWeaver</a></li><li><a href="/spring-framework-chinese/core/1.15 Additional Capabilities of the ApplicationContext.html" class="sidebar-link">1.15. ApplicationContext 的其他功能</a></li><li><a href="/spring-framework-chinese/core/1.16 beans-beanfactory.html" class="sidebar-link">1.16. BeanFactory</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring-framework-chinese/core/1.16 beans-beanfactory.html#beanfactory-还是-applicationcontext" class="sidebar-link">BeanFactory 还是 ApplicationContext</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/spring-framework-chinese/core/resources/" class="sidebar-heading clickable"><span>2. Resources</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>3. 验证，数据绑定和类型转换</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>4. Spring 表达式语言</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>5. Spring 和 AOP</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>6. Spring AOP APIs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>7. Null-safety</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8. 数据缓冲和编解码器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>9. 附录</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_1-2-容器概述"><a href="#_1-2-容器概述" class="header-anchor">#</a> 1.2 容器概述</h1> <p><code>org.springframework.context.ApplicationContext</code> 接口表示 spring 容器，
负责实例化、配置、组装 beans。
容器通过读取配置元数据获取有关要实例化，配置和组装哪些对象的指令。
配置元数据以 XML，Java 注解或 Java 代码表示。
它使你能够表达组成应用程序的对象以及这些对象之间的丰富的相互依赖关系。</p> <p>Spring 提供了 <code>applicationContext</code>接口的多种实现，在独立运行应用程序中通常创建<code>applicationContenxt</code>接口的 <code>ClassPathXmlApplicationContext</code> 或者 <code>FileSystemXmlApplicationContext</code> 的实例。XML 是定义配置元数据的传统格式，通过提供少量的 XMl 配置 声明式的指示容器支持其他的定义元数据格式，包括 使用 Java 注解 或者 java 代码的元数据格式。</p> <p>在大多数应用程序场景中, 实例化 Spring IoC 容器的一个或多个实例不需要用户主动书写业务代码。例如，在 web 应用场景下，应用程序中<code>web.xml</code>文件上简单的 8 行左右的 web 模版描述就足够了(参考 <a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#context-create" target="_blank" rel="noopener noreferrer">Web应用程序易用的 <code>ApplicationContext</code> 实例化<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)。如果你使用 <a href="https://spring.io/tools" target="_blank" rel="noopener noreferrer">Spring Tools for Eclipse <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> （一个Eclipse的开发环境),只需点击几下鼠标或按键，您就可以轻松地创建这样的模版配置。</p> <p>下图显示了Spring如何工作的高级视图。您的应用程序类与配置元数据相结合，因此，在创建和初始化 <code>ApplicationContext</code> 之后，您就拥有了一个完全配置且可执行的系统或应用程序。</p> <img src="/spring-framework-chinese/images/container-magic.png" alt="Figure 1. The Spring IoC container"> <p><strong>Figure 1. Spring IoC 容器</strong></p> <h2 id="_1-2-1-元数据配置"><a href="#_1-2-1-元数据配置" class="header-anchor">#</a> 1.2.1 元数据配置</h2> <p>如上面的图表所示，Spring Ioc 容器需要使用某种形式的配置元数据。这些配置元数据代表你作为一个应用开发者，告诉 Spring 容器 怎么去实例化，配置和组装你应用中的对象。</p> <p>传统上使用简单和直观的XML格式来提供配置元数据, 这种方式也是本章传递 Spring Ioc 容器关键概念和功能的主要方式。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>基于 XML 的元数据并不是配置元数据唯一的形式。Spring Ioc 容器本身与配置元数据实际上以什么形式书写完全解耦。当下，很多的开发者在他们的 Spring 应用中使用<a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-java" target="_blank" rel="noopener noreferrer">基于Java的配置方式<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <p>有关将其他形式的元数据与 Spring 容器一起使用的信息，请参见：</p> <ul><li><p><a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-annotation-config" target="_blank" rel="noopener noreferrer">基于注解的配置<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: Spring2.5 引入了对基于注解的配置元数据的支持。</p></li> <li><p><a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-java" target="_blank" rel="noopener noreferrer">基于 Java 的配置<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: 从 Spring3.0 开始，Spring JavaConfig 项目提供的许多特性成为核心 Spring 框架的一部分。因此，您可以使用 Java 文件而不是 XML 文件在应用程序类外部定义 bean。要使用这些新功能，请参阅 <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Configuration.html" target="_blank" rel="noopener noreferrer">@Configuration<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Bean.html" target="_blank" rel="noopener noreferrer">@Bean<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Import.html" target="_blank" rel="noopener noreferrer">@Import<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, 和 <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/DependsOn.html" target="_blank" rel="noopener noreferrer">@DependsOn<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 注解.</p></li></ul> <p>Spring 配置必须由容器管理的至少一个（通常是多个） bean 定义组成。基于 XML 的配置元数据将这些 bean 配置为顶级<code>&lt;beans/&gt;</code>元素内的<code>&lt;bean/&gt;</code>元素。Java 配置通常在<code>@Configuration</code>类中使用带<code>@Bean</code>注解的方法。</p> <p>这些 bean 定义对应于组成应用程序的实际对象。通常，您定义服务层对象、数据访问对象（DAO)、表示对象(如 Struts<code>Action</code>实例)、基础设施对象(如 Hibernate<code>SessionFactories</code>、JMS<code>Queues</code>等）。通常，人们不会在容器中配置细粒度的领域对象，因为创建和加载领域对象通常是 DAOS 和业务逻辑的责任。但是，您可以使用 Spring 与 AspectJ 的集成来配置在 IoC 容器控制之外创建的对象。请参见<a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#aop-atconfigurable" target="_blank" rel="noopener noreferrer">使用AspectJ通过Spring注入依赖的领域对象<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>以下示例显示了基于 XML 的配置元数据的基本结构：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>...<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>...<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 1 2
        <span class="token comment">&lt;!-- collaborators and configuration for this bean go here --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>...<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>...<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- collaborators and configuration for this bean go here --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- more bean definitions go here --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="tag-wraper" data-v-2a4eb3fc><div class="tag" data-v-2a4eb3fc>1</div> <div class="tag-content" data-v-2a4eb3fc><p data-v-2a4eb3fc><code data-v-2a4eb3fc>id</code>属性是标识单个 bean 定义的字符串。</p></div></div> <div class="tag-wraper" data-v-2a4eb3fc><div class="tag" data-v-2a4eb3fc>2</div> <div class="tag-content" data-v-2a4eb3fc><p data-v-2a4eb3fc><code data-v-2a4eb3fc>class</code>属性定义 bean 的类型并使用完全限定的类名。</p></div></div> <h2 id="_1-2-2-实例化容器"><a href="#_1-2-2-实例化容器" class="header-anchor">#</a> 1.2.2 实例化容器</h2> <p>提供给 <code>ApplicationContext</code> 构造函数的一个或多个位置路径是让容器从各种外部资源(如本地文件系统、Java<code>CLASSPATH</code>等)加载配置元数据的资源字符串。</p> <div class="switch-code" data-v-a42ff360><div data-v-a42ff360><button class="active" data-v-a42ff360>Java</button> <button data-v-a42ff360>Kotlin
        </button></div> <div class="language-java extra-class" data-v-a42ff360><pre class="language-java" data-v-a42ff360><code data-v-a42ff360><span class="token class-name" data-v-a42ff360>ApplicationContext</span> context <span class="token operator" data-v-a42ff360>=</span> <span class="token keyword" data-v-a42ff360>new</span> <span class="token class-name" data-v-a42ff360>ClassPathXmlApplicationContext</span><span class="token punctuation" data-v-a42ff360>(</span><span class="token string" data-v-a42ff360>&quot;services.xml&quot;</span><span class="token punctuation" data-v-a42ff360>,</span> <span class="token string" data-v-a42ff360>&quot;daos.xml&quot;</span><span class="token punctuation" data-v-a42ff360>)</span><span class="token punctuation" data-v-a42ff360>;</span>
</code></pre></div> <!----> <div class="content__java" data-v-a42ff360></div> <div class="content__kotlin" data-v-a42ff360></div></div> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>在了解了 SpringIoC 容器之后，您可能想更多地了解 Spring 的<code>Resource</code>抽象(如<a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#resources" target="_blank" rel="noopener noreferrer">Resources<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>中所述)，它提供了一种从URI语法定义的位置读取输入流的便捷机制)。具体地说，<code>Resource</code>路径用于构造应用上下文，如<a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#resources-app-ctx" target="_blank" rel="noopener noreferrer">应用上下文和资源Paths<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>中所述。</p></div> <p>以下示例展示了服务层对象(<code>services.xml</code>)配置文件：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- services --&gt;</span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>petStore<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.samples.jpetstore.services.PetStoreServiceImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>accountDao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>accountDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>itemDao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>itemDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!-- additional collaborators and configuration for this bean go here --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- more bean definitions for services go here --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>以下示例显示数据访问对象daos.xml文件：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>accountDao<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.samples.jpetstore.dao.jpa.JpaAccountDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- additional collaborators and configuration for this bean go here --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>itemDao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.samples.jpetstore.dao.jpa.JpaItemDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- additional collaborators and configuration for this bean go here --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- more bean definitions for data access objects go here --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在上例中，服务层由<code>PetStoreServiceImpl</code>类和<code>JpaAccountDao</code>和<code>JpaItemDao</code>两个数据访问对象组成(基于 JPA 对象关系映射标准)。<code>property name</code>元素表示 JavaBean 属性的名称，<code>ref</code>元素表示另一个 bean 定义的名称。这种<code>id</code>和<code>ref</code>元素的联动表达了协同对象之间的依赖关系。有关配置对象依赖项的详细信息，请参见<a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-dependencies" target="_blank" rel="noopener noreferrer">Dependencies<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h3 id="组成基于xml的配置元数据"><a href="#组成基于xml的配置元数据" class="header-anchor">#</a> 组成基于XML的配置元数据</h3> <p>让 bean 定义包括多个 XML 文件可能很有用。通常，每个单独的 XML 配置文件代表架构中的一个逻辑层或模块。</p> <p>您可以使用应用程序上下文构造函数(application context constructor)从所有这些 XML 片段加载 bean 定义。此构造函数接受多个<code>Resource</code>位置，如<a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-factory-instantiation" target="_blank" rel="noopener noreferrer">上一段<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.]中所示。或者，使用一个或多个<code>&lt;import/&gt;</code>元素从另外的文件加载 bean 定义。以下示例显示如何执行此操作：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>import</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>services.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>import</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>resources/messageSource.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>import</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/resources/themeSource.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bean1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>...<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bean2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>...<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在上面的示例中，外部 bean 定义从三个文件加载：<code>services.xml</code>、<code>messageSource.xml</code>和<code>hemeSource.xml</code>。所有位置路径都是相对于导入定义的文件而言的，因此<code>services.xml</code>必须与导入文件在同一目录或类路径位置，而<code>messageSource.xml</code>和<code>hemeSource.xml</code>必须在导入文件位置下方的<code>resource</code>位置。如您所见，前导斜杠被忽略。但是，考虑到这些路径是相对的，最好根本不使用斜杠。根据 Spring Schema ，要导入的文件的内容，包括顶级的<code>&lt;beans/&gt;</code>元素，必须是有效的 XML bean 定义。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>可以（但不建议）使用相对“../”路径引用父目录中的文件。这样做会创建对当前应用程序外部的文件的依赖关系。特别是，对于<code>classpath:</code>URL (例如，<code>classpath:../services.xml</code>)不推荐使用此引用，因为运行时解析过程会选择 “最近的” 类路径根，然后查看其父目录。类路径配置更改可能会导致选择不同的错误目录。</p> <p>您可以始终使用完全限定的资源位置，而不是相对路径：例如，<code>file:C:/config/services.xml</code>或<code>classpath:/config/services</code>。xml。但是，请注意，您正在将应用程序的配置耦合到特定的绝对位置。通常更可取的做法是为这样的绝对位置保留间接性--例如，通过在运行时针对JVM系统属性解析“${…​}”占位符。</p></div> <p>名称空间本身提供导入指令功能。在 SpringXML 提供的一系列-名称空间中，除了普通 Bean 定义之外，还提供了更多的配置特性，例如<code>context</code>和<code>util</code>名称空间。</p> <h3 id="groovy-bean-定义dsl"><a href="#groovy-bean-定义dsl" class="header-anchor">#</a> Groovy Bean 定义DSL</h3> <p>作为外部化配置元数据的另一个示例， Bean 定义也可以用 Spring 的 Groovy Bean 定义 DSL 表示，这在 Grails 框架中是已知的。通常，此类配置位于 “.groovy” 文件中，其结构如下例所示：</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>beans <span class="token punctuation">{</span>
    <span class="token function">dataSource</span><span class="token punctuation">(</span>BasicDataSource<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        driverClassName <span class="token operator">=</span> <span class="token string gstring">&quot;org.hsqldb.jdbcDriver&quot;</span>
        url <span class="token operator">=</span> <span class="token string gstring">&quot;jdbc:hsqldb:mem:grailsDB&quot;</span>
        username <span class="token operator">=</span> <span class="token string gstring">&quot;sa&quot;</span>
        password <span class="token operator">=</span> <span class="token string gstring">&quot;&quot;</span>
        settings <span class="token operator">=</span> <span class="token punctuation">[</span>mynew<span class="token punctuation">:</span><span class="token string gstring">&quot;setting&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token function">sessionFactory</span><span class="token punctuation">(</span>SessionFactory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dataSource <span class="token operator">=</span> dataSource
    <span class="token punctuation">}</span>
    <span class="token function">myService</span><span class="token punctuation">(</span>MyService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        nestedBean <span class="token operator">=</span> <span class="token punctuation">{</span> AnotherBean bean <span class="token operator">-&gt;</span>
            dataSource <span class="token operator">=</span> dataSource
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这种配置风格在很大程度上等同于 XML bean 定义，甚至支持 Spring 的 XML 配置名称空间。它还允许通过<code>import Beans</code>指令导入 XML bean 定义文件。</p> <h2 id="_1-2-3-容器的使用"><a href="#_1-2-3-容器的使用" class="header-anchor">#</a> 1.2.3 容器的使用</h2> <p><code>ApplicationContext</code>是高级工厂的接口，能够维护不同 bean 及其依赖项的注册表。通过使用方法<code>T getBean(String name，Class&lt;T&gt;requidType)</code>，您可以检索 bean 的实例。</p> <p>通过<code>ApplicationContext</code>可以读取并访问 bean 定义，如下例所示：</p> <div class="switch-code" data-v-a42ff360><div data-v-a42ff360><button class="active" data-v-a42ff360>Java</button> <button data-v-a42ff360>Kotlin
        </button></div> <div class="language-java extra-class" data-v-a42ff360><pre class="language-java" data-v-a42ff360><code data-v-a42ff360><span class="token comment" data-v-a42ff360>// create and configure beans</span>
<span class="token class-name" data-v-a42ff360>ApplicationContext</span> context <span class="token operator" data-v-a42ff360>=</span> <span class="token keyword" data-v-a42ff360>new</span> <span class="token class-name" data-v-a42ff360>ClassPathXmlApplicationContext</span><span class="token punctuation" data-v-a42ff360>(</span><span class="token string" data-v-a42ff360>&quot;services.xml&quot;</span><span class="token punctuation" data-v-a42ff360>,</span> <span class="token string" data-v-a42ff360>&quot;daos.xml&quot;</span><span class="token punctuation" data-v-a42ff360>)</span><span class="token punctuation" data-v-a42ff360>;</span>

<span class="token comment" data-v-a42ff360>// retrieve configured instance</span>
<span class="token class-name" data-v-a42ff360>PetStoreService</span> service <span class="token operator" data-v-a42ff360>=</span> context<span class="token punctuation" data-v-a42ff360>.</span><span class="token function" data-v-a42ff360>getBean</span><span class="token punctuation" data-v-a42ff360>(</span><span class="token string" data-v-a42ff360>&quot;petStore&quot;</span><span class="token punctuation" data-v-a42ff360>,</span> <span class="token class-name" data-v-a42ff360>PetStoreService</span><span class="token punctuation" data-v-a42ff360>.</span><span class="token keyword" data-v-a42ff360>class</span><span class="token punctuation" data-v-a42ff360>)</span><span class="token punctuation" data-v-a42ff360>;</span>

<span class="token comment" data-v-a42ff360>// use configured instance</span>
<span class="token class-name" data-v-a42ff360>List</span><span class="token generics" data-v-a42ff360><span class="token punctuation" data-v-a42ff360>&lt;</span><span class="token class-name" data-v-a42ff360>String</span><span class="token punctuation" data-v-a42ff360>&gt;</span></span> userList <span class="token operator" data-v-a42ff360>=</span> service<span class="token punctuation" data-v-a42ff360>.</span><span class="token function" data-v-a42ff360>getUsernameList</span><span class="token punctuation" data-v-a42ff360>(</span><span class="token punctuation" data-v-a42ff360>)</span><span class="token punctuation" data-v-a42ff360>;</span><span class="token punctuation" data-v-a42ff360>;</span>
</code></pre></div> <!----> <div class="content__java" data-v-a42ff360></div> <div class="content__kotlin" data-v-a42ff360></div></div> <p>使用 Groovy 配置，引导看起来非常相似。它有一个不同的上下文(context)实现类，该类支持 Groovy (但也支持 XML bean 定义)。下面的示例显示 Groovy 配置：</p> <div class="switch-code" data-v-a42ff360><div data-v-a42ff360><button class="active" data-v-a42ff360>Java</button> <button data-v-a42ff360>Kotlin
        </button></div> <div class="language-java extra-class" data-v-a42ff360><pre class="language-java" data-v-a42ff360><code data-v-a42ff360><span class="token class-name" data-v-a42ff360>ApplicationContext</span> context <span class="token operator" data-v-a42ff360>=</span> <span class="token keyword" data-v-a42ff360>new</span> <span class="token class-name" data-v-a42ff360>GenericGroovyApplicationContext</span><span class="token punctuation" data-v-a42ff360>(</span><span class="token string" data-v-a42ff360>&quot;services.groovy&quot;</span><span class="token punctuation" data-v-a42ff360>,</span> <span class="token string" data-v-a42ff360>&quot;daos.groovy&quot;</span><span class="token punctuation" data-v-a42ff360>)</span><span class="token punctuation" data-v-a42ff360>;</span>
</code></pre></div> <!----> <div class="content__java" data-v-a42ff360></div> <div class="content__kotlin" data-v-a42ff360></div></div> <p>最灵活的变体是<code>GenericApplicationContext</code>结合 reader 委托 - ，其中<code>XmlBeanDefinitionReader</code>用于 xml 文件，如下例所示：</p> <div class="switch-code" data-v-a42ff360><div data-v-a42ff360><button class="active" data-v-a42ff360>Java</button> <button data-v-a42ff360>Kotlin
        </button></div> <div class="language-java extra-class" data-v-a42ff360><pre class="language-java" data-v-a42ff360><code data-v-a42ff360><span class="token class-name" data-v-a42ff360>GenericApplicationContext</span> context <span class="token operator" data-v-a42ff360>=</span> <span class="token keyword" data-v-a42ff360>new</span> <span class="token class-name" data-v-a42ff360>GenericApplicationContext</span><span class="token punctuation" data-v-a42ff360>(</span><span class="token punctuation" data-v-a42ff360>)</span><span class="token punctuation" data-v-a42ff360>;</span>
<span class="token keyword" data-v-a42ff360>new</span> <span class="token class-name" data-v-a42ff360>XmlBeanDefinitionReader</span><span class="token punctuation" data-v-a42ff360>(</span>context<span class="token punctuation" data-v-a42ff360>)</span><span class="token punctuation" data-v-a42ff360>.</span><span class="token function" data-v-a42ff360>loadBeanDefinitions</span><span class="token punctuation" data-v-a42ff360>(</span><span class="token string" data-v-a42ff360>&quot;services.xml&quot;</span><span class="token punctuation" data-v-a42ff360>,</span> <span class="token string" data-v-a42ff360>&quot;daos.xml&quot;</span><span class="token punctuation" data-v-a42ff360>)</span><span class="token punctuation" data-v-a42ff360>;</span>
context<span class="token punctuation" data-v-a42ff360>.</span><span class="token function" data-v-a42ff360>refresh</span><span class="token punctuation" data-v-a42ff360>(</span><span class="token punctuation" data-v-a42ff360>)</span><span class="token punctuation" data-v-a42ff360>;</span>
</code></pre></div> <!----> <div class="content__java" data-v-a42ff360></div> <div class="content__kotlin" data-v-a42ff360></div></div> <p>也可以对 Groovy 文件使用<code>GroovyBeanDefinitionReader</code>，如下例所示：</p> <div class="switch-code" data-v-a42ff360><div data-v-a42ff360><button class="active" data-v-a42ff360>Java</button> <button data-v-a42ff360>Kotlin
        </button></div> <div class="language-java extra-class" data-v-a42ff360><pre class="language-java" data-v-a42ff360><code data-v-a42ff360><span class="token class-name" data-v-a42ff360>GenericApplicationContext</span> context <span class="token operator" data-v-a42ff360>=</span> <span class="token keyword" data-v-a42ff360>new</span> <span class="token class-name" data-v-a42ff360>GenericApplicationContext</span><span class="token punctuation" data-v-a42ff360>(</span><span class="token punctuation" data-v-a42ff360>)</span><span class="token punctuation" data-v-a42ff360>;</span>
<span class="token keyword" data-v-a42ff360>new</span> <span class="token class-name" data-v-a42ff360>GroovyBeanDefinitionReader</span><span class="token punctuation" data-v-a42ff360>(</span>context<span class="token punctuation" data-v-a42ff360>)</span><span class="token punctuation" data-v-a42ff360>.</span><span class="token function" data-v-a42ff360>loadBeanDefinitions</span><span class="token punctuation" data-v-a42ff360>(</span><span class="token string" data-v-a42ff360>&quot;services.groovy&quot;</span><span class="token punctuation" data-v-a42ff360>,</span> <span class="token string" data-v-a42ff360>&quot;daos.groovy&quot;</span><span class="token punctuation" data-v-a42ff360>)</span><span class="token punctuation" data-v-a42ff360>;</span>
context<span class="token punctuation" data-v-a42ff360>.</span><span class="token function" data-v-a42ff360>refresh</span><span class="token punctuation" data-v-a42ff360>(</span><span class="token punctuation" data-v-a42ff360>)</span><span class="token punctuation" data-v-a42ff360>;</span>
</code></pre></div> <!----> <div class="content__java" data-v-a42ff360></div> <div class="content__kotlin" data-v-a42ff360></div></div> <p>您可以在同一个<code>ApplicationContext</code>上混合和匹配这些 reader 委托，从不同的配置源读取 bean 定义。</p> <p>然后，您可以使用<code>getBean</code>来检索 bean 的实例。<code>ApplicationContext</code>接口有几个用于检索 bean 的其他方法，但理想情况下，您的应用程序代码不应该使用它们。实际上，您的应用程序代码根本不应该调用<code>getBean()</code>方法，从而完全不依赖于 SpringAPI 。例如， Spring 与 Web 框架的集成为各种 Web 框架组件(如控制器和JSF管理的bean)提供了依赖项注入，允许您通过元数据(如自动装配注解)声明对特定 bean 的依赖项。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最近更新时间:</span> <span class="time">2021-01-18 13:01:04</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/spring-framework-chinese/core/1.1 beans-introduction.html" class="prev">
        1.1. spring ioc 容器和 beans 介绍
      </a></span> <span class="next"><a href="/spring-framework-chinese/core/1.3 beans-definition.html">
        1.3. Beans 概述
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/spring-framework-chinese/assets/js/app.7f7a7551.js" defer></script><script src="/spring-framework-chinese/assets/js/2.50df17b9.js" defer></script><script src="/spring-framework-chinese/assets/js/16.e0e832a3.js" defer></script><script src="/spring-framework-chinese/assets/js/4.ef7c169f.js" defer></script><script src="/spring-framework-chinese/assets/js/3.d523927b.js" defer></script>
  </body>
</html>
