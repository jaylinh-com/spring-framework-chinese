<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1.3 Bean 概述 | Spring 框架中文手册</title>
    <meta name="generator" content="VuePress 1.5.1">
    <link rel="ico" href="/spring-framework-chinese/logo.png">
    <link rel="shortcut icon" href="/spring-framework-chinese/favicon.ico">
    <meta name="description" content="Spring 框架中文手册">
    <link rel="preload" href="/spring-framework-chinese/assets/css/0.styles.7eb10291.css" as="style"><link rel="preload" href="/spring-framework-chinese/assets/js/app.31346e20.js" as="script"><link rel="preload" href="/spring-framework-chinese/assets/js/2.c2cabe95.js" as="script"><link rel="preload" href="/spring-framework-chinese/assets/js/17.716f59d0.js" as="script"><link rel="preload" href="/spring-framework-chinese/assets/js/3.f6162600.js" as="script"><link rel="prefetch" href="/spring-framework-chinese/assets/js/10.15d6cdab.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/11.2d9333e0.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/12.3e2a595d.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/13.3e3449fc.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/14.c3a4e48b.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/15.9aaae301.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/16.517c5c8f.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/18.3fe3f1e4.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/19.00a9b370.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/20.7f895621.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/21.07b61294.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/22.ea7165f8.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/23.d851df66.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/24.e6358e68.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/25.6142b10d.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/26.27ddf8e0.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/27.121e1809.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/28.b8ca8ee3.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/29.542272a1.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/30.12e3e3c9.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/31.128d7dfb.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/32.0527b32d.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/33.7ff377bd.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/34.32284ac2.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/35.778d6f14.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/36.49dcd9f5.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/37.225c4f2f.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/38.9bdc97de.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/39.567fb995.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/4.3cbd5c94.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/40.a9d40990.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/41.31cda98c.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/42.884e37c8.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/43.a32c22a5.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/44.6b02043a.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/45.8b8f4bb7.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/46.56e7c5a7.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/47.cf9e614d.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/48.a5bce247.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/49.524077c0.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/5.5f012750.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/50.69bec8f0.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/51.9d728f01.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/52.ba1309da.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/53.b507785e.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/54.ccb827c8.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/55.d42c3168.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/56.bbff78c9.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/57.b5c72e00.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/58.3bad314d.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/59.0fa4a1fa.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/6.a8acdbc7.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/60.7d074794.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/61.1b0ef2eb.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/62.9c86e289.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/63.a0bc0d6b.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/64.710fc4a4.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/65.68b6e1c2.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/66.34e2b949.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/7.4717d1fb.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/8.0da25efd.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/9.ac1a4a27.js">
    <link rel="stylesheet" href="/spring-framework-chinese/assets/css/0.styles.7eb10291.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/spring-framework-chinese/" class="home-link router-link-active"><!----> <span class="site-name">Spring 框架中文手册</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/spring-framework-chinese/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/spring-framework-chinese/overview/" class="nav-link">
  概述
</a></div><div class="nav-item"><a href="/spring-framework-chinese/core/" class="nav-link router-link-active">
  核心
</a></div><div class="nav-item"><a href="/spring-framework-chinese/testing/" class="nav-link">
  测试
</a></div><div class="nav-item"><a href="/spring-framework-chinese/data-access/" class="nav-link">
  数据访问
</a></div><div class="nav-item"><a href="/spring-framework-chinese/web-servlet/" class="nav-link">
  Web Servlet
</a></div><div class="nav-item"><a href="/spring-framework-chinese/web-reactive/" class="nav-link">
  Web Reactive
</a></div><div class="nav-item"><a href="/spring-framework-chinese/integration/" class="nav-link">
  集成
</a></div><div class="nav-item"><a href="/spring-framework-chinese/languages/" class="nav-link">
  语言
</a></div><div class="nav-item"><a href="https://github.com/jaylinh-com/spring-framework-chinese" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="切换语言" class="dropdown-title"><span class="title">切换语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/spring-framework-chinese/core/1.3 beans-definition.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/spring-framework-chinese/en/core/1.3 beans-definition.html" class="nav-link">
  English
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/spring-framework-chinese/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/spring-framework-chinese/overview/" class="nav-link">
  概述
</a></div><div class="nav-item"><a href="/spring-framework-chinese/core/" class="nav-link router-link-active">
  核心
</a></div><div class="nav-item"><a href="/spring-framework-chinese/testing/" class="nav-link">
  测试
</a></div><div class="nav-item"><a href="/spring-framework-chinese/data-access/" class="nav-link">
  数据访问
</a></div><div class="nav-item"><a href="/spring-framework-chinese/web-servlet/" class="nav-link">
  Web Servlet
</a></div><div class="nav-item"><a href="/spring-framework-chinese/web-reactive/" class="nav-link">
  Web Reactive
</a></div><div class="nav-item"><a href="/spring-framework-chinese/integration/" class="nav-link">
  集成
</a></div><div class="nav-item"><a href="/spring-framework-chinese/languages/" class="nav-link">
  语言
</a></div><div class="nav-item"><a href="https://github.com/jaylinh-com/spring-framework-chinese" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="切换语言" class="dropdown-title"><span class="title">切换语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/spring-framework-chinese/core/1.3 beans-definition.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/spring-framework-chinese/en/core/1.3 beans-definition.html" class="nav-link">
  English
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/spring-framework-chinese/core/" class="sidebar-heading clickable router-link-active open"><span>1. Ioc 容器</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/spring-framework-chinese/core/1.1 beans-introduction.html" class="sidebar-link">1.1. spring ioc 容器和 beans 介绍</a></li><li><a href="/spring-framework-chinese/core/1.2 beans-basics.html" class="sidebar-link">1.2. 容器概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring-framework-chinese/core/1.2 beans-basics.html#_1-2-1-元数据配置" class="sidebar-link">1.2.1 元数据配置</a></li><li class="sidebar-sub-header"><a href="/spring-framework-chinese/core/1.2 beans-basics.html#_1-2-2-实例化容器" class="sidebar-link">1.2.2 实例化容器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring-framework-chinese/core/1.2 beans-basics.html#组成基于xml的配置元数据" class="sidebar-link">组成基于XML的配置元数据</a></li><li class="sidebar-sub-header"><a href="/spring-framework-chinese/core/1.2 beans-basics.html#groovy-bean-定义dsl" class="sidebar-link">Groovy Bean 定义DSL</a></li></ul></li><li class="sidebar-sub-header"><a href="/spring-framework-chinese/core/1.2 beans-basics.html#_1-2-3-容器的使用" class="sidebar-link">1.2.3 容器的使用</a></li></ul></li><li><a href="/spring-framework-chinese/core/1.3 beans-definition.html" class="active sidebar-link">1.3. Beans 概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring-framework-chinese/core/1.3 beans-definition.html#_1-3-1-命名-bean" class="sidebar-link">1.3.1 命名 Bean</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring-framework-chinese/core/1.3 beans-definition.html#为-bean-定义外部的-bean-指定别名" class="sidebar-link">为 Bean 定义外部的 Bean 指定别名</a></li></ul></li><li class="sidebar-sub-header"><a href="/spring-framework-chinese/core/1.3 beans-definition.html#_1-3-2-实例化-bean" class="sidebar-link">1.3.2 实例化 Bean</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring-framework-chinese/core/1.3 beans-definition.html#使用构造函数实例化" class="sidebar-link">使用构造函数实例化</a></li><li class="sidebar-sub-header"><a href="/spring-framework-chinese/core/1.3 beans-definition.html#使用静态工厂方法实例化" class="sidebar-link">使用静态工厂方法实例化</a></li><li class="sidebar-sub-header"><a href="/spring-framework-chinese/core/1.3 beans-definition.html#使用实例工厂方法进行实例化" class="sidebar-link">使用实例工厂方法进行实例化</a></li><li class="sidebar-sub-header"><a href="/spring-framework-chinese/core/1.3 beans-definition.html#确定-bean-的运行时类型" class="sidebar-link">确定 Bean 的运行时类型</a></li></ul></li></ul></li><li><a href="/spring-framework-chinese/core/1.4 beans-dependencies.html" class="sidebar-link">1.4. 依赖</a></li><li><a href="/spring-framework-chinese/core/1.5 beans-factory-scopes.html" class="sidebar-link">1.5. Beans 作用域</a></li><li><a href="/spring-framework-chinese/core/1.6 beans-factory-nature.html" class="sidebar-link">1.6. 自定义 bean 的性质</a></li><li><a href="/spring-framework-chinese/core/1.7 Bean Definition Inheritance.html" class="sidebar-link">1.7. Bean 定义的继承</a></li><li><a href="/spring-framework-chinese/core/1.8 Container Extension Points.html" class="sidebar-link">1.8. 容器扩展点</a></li><li><a href="/spring-framework-chinese/core/1.9 Annotation-based Container Configuration.html" class="sidebar-link">1.9. 基于注解的容器配置</a></li><li><a href="/spring-framework-chinese/core/1.10 Classpath Scanning and Managed Components.html" class="sidebar-link">1.10. classpath 扫描和组件管理</a></li><li><a href="/spring-framework-chinese/core/1.11 Using JSR 330 Standard Annotations.html" class="sidebar-link">1.11. 使用 JSR330 标准注解</a></li><li><a href="/spring-framework-chinese/core/1.12 Java-based Container Configuration.html" class="sidebar-link">1.12. 基于Java的容器配置</a></li><li><a href="/spring-framework-chinese/core/1.13 Environment Abstraction.html" class="sidebar-link">1.13. 环境抽象</a></li><li><a href="/spring-framework-chinese/core/1.14 Registering a LoadTimeWeaver.html" class="sidebar-link">1.14. 注册 LoadTimeWeaver</a></li><li><a href="/spring-framework-chinese/core/1.15 Additional Capabilities of the ApplicationContext.html" class="sidebar-link">1.15. ApplicationContext 的其他功能</a></li><li><a href="/spring-framework-chinese/core/1.16 beans-beanfactory.html" class="sidebar-link">1.16. BeanFactory</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring-framework-chinese/core/1.16 beans-beanfactory.html#beanfactory-还是-applicationcontext" class="sidebar-link">BeanFactory 还是 ApplicationContext</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/spring-framework-chinese/core/resources/" class="sidebar-heading clickable"><span>2. Resources</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>3. 验证，数据绑定和类型转换</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>4. Spring 表达式语言</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>5. Spring 和 AOP</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>6. Spring AOP APIs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>7. Null-safety</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8. 数据缓冲和编解码器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>9. 附录</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_1-3-bean-概述"><a href="#_1-3-bean-概述" class="header-anchor">#</a> 1.3 Bean 概述</h1> <p>Spring IOC 容器管理一个或多个 bean。这些 bean 是使用您提供给容器的配置元数据创建的（例如，以 XML<code>&lt;bean/&gt;</code>定义的形式）。</p> <p>在容器本身内，这些 bean 定义表示为<code>BeanDefinition</code>对象，其中包含（以及其他信息）以下元数据：</p> <ul><li>包限定的类名：通常是定义的 bean 的实际实现类。</li> <li>bean 行为配置元素，它规定 bean 在容器中的行为（作用域、生命周期回调等等）。</li> <li>对Bean执行其工作所需的其他Bean的引用。这些引用也称为协作者或依赖项。</li> <li>要在新创建的对象中设置的其他配置，例如在管理连接池的Bean中使用的连接数量或池的大小限制。</li></ul> <p>此元数据转换为组成每个 bean 定义的一组属性。下表介绍了这些属性：</p> <div class="custom-block tip"><p class="custom-block-title">表 1.Bean 定义。</p> <table><thead><tr><th style="text-align:left;">属性</th> <th style="text-align:left;">解释​</th></tr></thead> <tbody><tr><td style="text-align:left;">类</td> <td style="text-align:left;"><a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-factory-class" target="_blank" rel="noopener noreferrer">实例化 Beans<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td style="text-align:left;">名称</td> <td style="text-align:left;"><a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-beanname" target="_blank" rel="noopener noreferrer">命名 Beans<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td style="text-align:left;">作用域</td> <td style="text-align:left;"><a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-factory-scopes" target="_blank" rel="noopener noreferrer">Bean 作用域<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td style="text-align:left;">构造函数参数</td> <td style="text-align:left;"><a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-factory-collaborators" target="_blank" rel="noopener noreferrer">依赖注入<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td style="text-align:left;">属性</td> <td style="text-align:left;"><a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-factory-collaborators" target="_blank" rel="noopener noreferrer">依赖注入<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td style="text-align:left;">自动装配模式</td> <td style="text-align:left;"><a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-factory-autowire" target="_blank" rel="noopener noreferrer">自动装配协作者<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td style="text-align:left;">延迟初始化模式</td> <td style="text-align:left;"><a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-factory-lazy-init" target="_blank" rel="noopener noreferrer">延迟-初始化的Beans<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td style="text-align:left;">初始化方法</td> <td style="text-align:left;"><a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-factory-lifecycle-initializingbean" target="_blank" rel="noopener noreferrer">初始化回调<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td style="text-align:left;">销毁方式</td> <td style="text-align:left;"><a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-factory-lifecycle-disposablebean" target="_blank" rel="noopener noreferrer">销毁回调<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr></tbody></table></div> <p>除了包含如何创建特定 bean 的 bean 定义之外，<code>ApplicationContext</code>实现还允许注册容器外(由用户)创建的现有对象。通过<code>getBeanFactory()</code>方法访问 ApplicationContext 的 BeanFactory ，返回<code>BeanFactory``DefaultListableBeanFactory</code>实现。<code>DefaultListableBeanFactory</code>通过<code>registerSingleton(..)</code>和<code>registerBeanDefinition(..)</code>方法支持该注册。但是，典型的应用程序只使用通过常规 bean 定义元数据定义的 bean。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>需要尽早注册 Bean 元数据和手动提供的 Singleton 实例，以便容器在自动装配和其他自省步骤期间能够正确地对它们进行推理。虽然在一定程度上支持覆盖现有的元数据和现有的单例实例，但不正式支持在运行时注册新的 bean （与工厂的实时访问并发），并且可能导致并发访问异常、bean 容器中的状态不一致，或者两者兼而有之。</p></div> <h2 id="_1-3-1-命名-bean"><a href="#_1-3-1-命名-bean" class="header-anchor">#</a> 1.3.1 命名 Bean</h2> <p>每个 bean 都有一个或多个标识符。这些标识符在托管 bean 的容器中必须是唯一的。一个 bean 通常只有一个标识符。但是，如果它需要多个，则多余的可以被视为别名。</p> <p>在基于 XML 的配置元数据中，您可以使用<code>id</code>属性或<code>name</code>属性来指定 bean 标识符。<code>id</code>属性只允许您指定一个 id。通常，这些名称是含有字母数字的（‘myBean’、‘omeService’等)，但它们也可以包含特殊字符。如果您想为 bean 引入其他别名，也可以在<code>name</code>属性中指定它们，用逗号(,)、分号(;）或空格分隔。值得注意的是，在 Spring3.1 之前的版本中，<code>id</code>属性被定义为<code>xsd:id</code>类型，它限制了可能的字符。从 3.1 开始，定义为<code>xsd：string</code>类型。请注意，bean‘id’唯一性仍然由容器强制执行，尽管不再由 XML 解析器强制执行。</p> <p>bean 不需要提供<code>name</code>或<code>id</code>。如果不显式提供<code>name</code>或<code>id</code>，容器会为该 bean 生成唯一的名称。但是，如果您希望通过使用<code>ref</code>元素或服务定位器样式查找来按名称引用该 bean，则必须提供一个名称。不提供名称的原因与使用<a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-inner-beans" target="_blank" rel="noopener noreferrer">内部 beans<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>和<a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-factory-autowire" target="_blank" rel="noopener noreferrer">自动装配协作者<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>]相关</p> <div class="custom-block tip"><p class="custom-block-title">Bean 命名约定</p> <p>约定是在命名 bean 时使用标准的 Java 约定，例如字段名称。也就是说，bean 名称以小写字母开头，并且从那里开始采用驼峰大小写。这些名称的示例包括<code>accountManager</code>、<code>countService</code>、<code>userDao</code>、<code>loginController</code>等。</p> <p>始终如一地命名 bean 使您的配置更易于阅读和理解。此外，如果您使用的是Spring AOP，那么将<code>Advice</code>应用到一组按名称关联的Bean上会有很大帮助。</p></div> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>通过在类路径中扫描组件，Spring 将按照前面描述的规则为未命名的组件生成 bean 名称：本质上，获取简单的类名并将其初始字符转换为小写。但是，在（不常见）特殊情况下，如果有多个字符，并且第一个和第二个字符都是大写，则会保留原始大小写。这些规则与<code>java.beans.Introspector.decapitalize</code>（Spring 在这里使用）定义的规则相同。</p></div> <h3 id="为-bean-定义外部的-bean-指定别名"><a href="#为-bean-定义外部的-bean-指定别名" class="header-anchor">#</a> 为 Bean 定义外部的 Bean 指定别名</h3> <p>在 bean 定义本身中，通过使用 id 属性指定的最多一个名称和 name 属性中任意数量的其他名称的组合，可以为 bean 提供多个名称。这些名称可以是同一 Bean 的等效别名，并且在某些情况下很有用，例如通过使用特定于组件本身的 Bean 名称让应用程序中的每个组件引用公共依赖项。</p> <p>但是，指定实际定义 bean 的所有别名并不总是足够的。有时需要为在其他地方定义的 bean 引入别名。这通常是在大型系统中的情况，其中配置在每个子系统之间拆分，每个子系统具有其自己的对象定义集。在基于 XML 的配置元数据中，可以使用<code>&lt;alias/&gt;</code>元素来实现。以下示例显示如何执行此操作：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>alias</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fromName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>在这种情况下，在使用该别名定义之后，名为<code>fromName</code>的 bean （在同一容器中）也可以被称为<code>toName</code>。</p> <p>例如，子系统 A 的配置元数据可以通过名称<code>subsystemA-dataSource</code>引用数据源。子系统 B 的配置元数据可以引用名为<code>subsystemB-dataSource</code>的数据源。在组合使用这两个子系统的主应用程序时，主应用程序以<code>myApp-dataSource</code>的名称引用 DataSource。要使所有三个名称都引用同一对象，您可以将以下别名定义添加到配置元数据：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>alias</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myApp-dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>subsystemA-dataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>alias</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myApp-dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>subsystemB-dataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>现在，每个组件和主应用程序都可以通过唯一且保证不与任何其他定义冲突的名称引用 DataSource （有效地创建了一个名称空间），但它们引用的是同一个 bean。</p> <div class="custom-block tip"><p class="custom-block-title">Java-配置</p> <p>如果您使用的是 Java 配置，则可以使用<code>@Bean</code>注释来提供别名。请参见<a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-java-bean-annotation" target="_blank" rel="noopener noreferrer">使用 <code>@Bean</code> 注解<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <h2 id="_1-3-2-实例化-bean"><a href="#_1-3-2-实例化-bean" class="header-anchor">#</a> 1.3.2 实例化 Bean</h2> <p>Bean 定义本质上是创建一个或多个对象的配方。必要的时候，容器查看命名 bean 的配方，并使用由该 bean 定义封装的配置元数据来创建（或获取）实际对象。</p> <p>如果您使用基于XML的配置元数据，则需要在<code>&lt;bean/&gt;</code>元素的<code>class</code>属性中指定要实例化的Object的类型(或类)。此<code>class</code>属性(内部是<code>BeanDefinition</code>实例的<code>Class</code>属性)通常是必需的。(异常参见<a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-factory-class-instance-factory-method" target="_blank" rel="noopener noreferrer">使用实例工厂Method<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>实例化]和<a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-child-bean-definitions" target="_blank" rel="noopener noreferrer">Bean定义Inheritance<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.)。您可以通过以下两种方式之一使用<code>Class</code>属性：</p> <ul><li><p>通常，在容器本身通过反射调用其构造函数直接创建 Bean 的情况下，指定要构造的 Bean 类，这在某种程度上相当于带有<code>new</code>操作符的 Java 代码。</p></li> <li><p>指定包含用于创建对象的<code>static</code>工厂方法的实际类，在容器调用类上的<code>static</code>工厂方法以创建 bean 的较不常见的情况下。调用<code>static</code>工厂方法返回的 Object 类型可以是同一个类，也可以完全是另一个类。</p></li></ul> <div class="custom-block tip"><p class="custom-block-title">内部类名</p> <p>如果要为<code>static</code>嵌套类配置 bean 定义，则必须使用嵌套类的二进制名称。</p> <p>例如，如果您在<code>com.example</code>包中有一个名为<code>SomeThing</code>的类，并且这个<code>SomeThing</code>类有一个名为<code>OtherThing</code>的<code>static</code>嵌套类，则 Bean 定义上的<code>class</code>属性的值为<code>com.example.SomeThing$OtherThing</code>。</p> <p>请注意，名称中使用<code>$</code>字符将嵌套的类名与外部类名分开。</p></div> <h3 id="使用构造函数实例化"><a href="#使用构造函数实例化" class="header-anchor">#</a> 使用构造函数实例化</h3> <p>当您通过构造函数方法创建 bean 时，所有普通类都可由 Spring 使用并与 Spring 兼容。也就是说，正在开发的类不需要实现任何特定的接口，也不需要以特定的方式编码。只需指定 bean 类就足够了。但是，根据您对特定 bean 使用的 IoC 类型，您可能需要一个默认（空）构造函数。</p> <p>Spring IOC 容器几乎可以管理您希望它管理的任何类。它不仅限于管理真正的 JavaBean。大多数 Spring 用户更喜欢实际的 JavaBean，它只有一个默认（无参数）构造函数，以及根据容器中的属性建模的适当的 setter 和 getter。您还可以在容器中包含更多奇异的非 bean 样式的类。例如，如果您需要使用绝对不符合 JavaBean 规范的遗留连接池，Spring 也可以管理它。</p> <p>使用基于 XML 的配置元数据，您可以按如下方式指定 Bean 类：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>exampleBean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>examples.ExampleBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>anotherExample<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>examples.ExampleBeanTwo<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>有关向构造函数提供参数(如果需要)以及在构造对象后设置对象实例属性的机制的详细信息，请参阅<a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-factory-collaborators" target="_blank" rel="noopener noreferrer">依赖<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h3 id="使用静态工厂方法实例化"><a href="#使用静态工厂方法实例化" class="header-anchor">#</a> 使用静态工厂方法实例化</h3> <p>定义使用静态工厂方法创建的 bean 时，使用<code>class</code>属性指定包含<code>static</code>工厂方法的类，使用名为<code>Factory-method</code>的属性指定工厂方法本身的名称。您应该能够调用此方法（使用可选参数，如稍后所述）并返回活动对象，随后将其视为通过构造函数创建。这种 bean 定义的一种用途是在遗留代码中调用 <code>static</code> 工厂。</p> <p>下面的 bean 定义指定通过调用工厂方法创建 bean。该定义没有指定返回对象的类型（类），只指定了包含工厂方法的类。在本例中，<code>createInstance()</code>方法必须是静态方法。以下示例显示如何指定工厂方法：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clientService<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>examples.ClientService<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">factory-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createInstance<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>下面的示例显示了一个可以与前面的bean定义一起使用的类：</p> <div class="switch-code" data-v-d858fa5c><div data-v-d858fa5c><button class="active" data-v-d858fa5c>Java</button> <button data-v-d858fa5c>Kotlin</button></div> <div class="language-java extra-class" data-v-d858fa5c><pre class="language-java" data-v-d858fa5c><code data-v-d858fa5c><span class="token keyword" data-v-d858fa5c>public</span> <span class="token keyword" data-v-d858fa5c>class</span> <span class="token class-name" data-v-d858fa5c>ClientService</span> <span class="token punctuation" data-v-d858fa5c>{</span>
    <span class="token keyword" data-v-d858fa5c>private</span> <span class="token keyword" data-v-d858fa5c>static</span> <span class="token class-name" data-v-d858fa5c>ClientService</span> clientService <span class="token operator" data-v-d858fa5c>=</span> <span class="token keyword" data-v-d858fa5c>new</span> <span class="token class-name" data-v-d858fa5c>ClientService</span><span class="token punctuation" data-v-d858fa5c>(</span><span class="token punctuation" data-v-d858fa5c>)</span><span class="token punctuation" data-v-d858fa5c>;</span>
    <span class="token keyword" data-v-d858fa5c>private</span> <span class="token class-name" data-v-d858fa5c>ClientService</span><span class="token punctuation" data-v-d858fa5c>(</span><span class="token punctuation" data-v-d858fa5c>)</span> <span class="token punctuation" data-v-d858fa5c>{</span><span class="token punctuation" data-v-d858fa5c>}</span>

    <span class="token keyword" data-v-d858fa5c>public</span> <span class="token keyword" data-v-d858fa5c>static</span> <span class="token class-name" data-v-d858fa5c>ClientService</span> <span class="token function" data-v-d858fa5c>createInstance</span><span class="token punctuation" data-v-d858fa5c>(</span><span class="token punctuation" data-v-d858fa5c>)</span> <span class="token punctuation" data-v-d858fa5c>{</span>
        <span class="token keyword" data-v-d858fa5c>return</span> clientService<span class="token punctuation" data-v-d858fa5c>;</span>
    <span class="token punctuation" data-v-d858fa5c>}</span>
<span class="token punctuation" data-v-d858fa5c>}</span>
</code></pre></div> <!----> <div class="content__java" data-v-d858fa5c></div> <div class="content__kotlin" data-v-d858fa5c></div></div> <p>有关向工厂方法提供(可选)参数以及在对象从工厂返回后设置对象实例属性的机制的详细信息，可参阅<a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-factory-properties-detailed" target="_blank" rel="noopener noreferrer">依赖关系和配置的详细说明<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="使用实例工厂方法进行实例化"><a href="#使用实例工厂方法进行实例化" class="header-anchor">#</a> 使用实例工厂方法进行实例化</h3> <p>与通过<code>静态工厂方法</code>实例化类似，使用实例工厂方法实例化将调用容器中已有 bean 的非静态方法来创建新 bean。要使用此机制，请将<code>class</code>属性保留为空，并在<code>Factory-bean</code>属性中指定当前（或父或祖先）容器中包含要调用以创建对象的实例方法的 bean 的名称。使用<code>Factory-method</code>属性设置工厂方法本身的名称。以下示例显示如何配置此类 Bean：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- the factory bean, which contains a method called createInstance() --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>serviceLocator<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>examples.DefaultServiceLocator<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- inject any dependencies required by this locator bean --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- the bean to be created via the factory bean --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clientService<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">factory-bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>serviceLocator<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">factory-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createClientServiceInstance<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>下面的示例显示了相应的类：</p> <div class="switch-code" data-v-d858fa5c><div data-v-d858fa5c><button class="active" data-v-d858fa5c>Java</button> <button data-v-d858fa5c>Kotlin</button></div> <div class="language-java extra-class" data-v-d858fa5c><pre class="language-java" data-v-d858fa5c><code data-v-d858fa5c><span class="token keyword" data-v-d858fa5c>public</span> <span class="token keyword" data-v-d858fa5c>class</span> <span class="token class-name" data-v-d858fa5c>DefaultServiceLocator</span> <span class="token punctuation" data-v-d858fa5c>{</span>

    <span class="token keyword" data-v-d858fa5c>private</span> <span class="token keyword" data-v-d858fa5c>static</span> <span class="token class-name" data-v-d858fa5c>ClientService</span> clientService <span class="token operator" data-v-d858fa5c>=</span> <span class="token keyword" data-v-d858fa5c>new</span> <span class="token class-name" data-v-d858fa5c>ClientServiceImpl</span><span class="token punctuation" data-v-d858fa5c>(</span><span class="token punctuation" data-v-d858fa5c>)</span><span class="token punctuation" data-v-d858fa5c>;</span>

    <span class="token keyword" data-v-d858fa5c>public</span> <span class="token class-name" data-v-d858fa5c>ClientService</span> <span class="token function" data-v-d858fa5c>createClientServiceInstance</span><span class="token punctuation" data-v-d858fa5c>(</span><span class="token punctuation" data-v-d858fa5c>)</span> <span class="token punctuation" data-v-d858fa5c>{</span>
        <span class="token keyword" data-v-d858fa5c>return</span> clientService<span class="token punctuation" data-v-d858fa5c>;</span>
    <span class="token punctuation" data-v-d858fa5c>}</span>
<span class="token punctuation" data-v-d858fa5c>}</span>
</code></pre></div> <!----> <div class="content__java" data-v-d858fa5c></div> <div class="content__kotlin" data-v-d858fa5c></div></div> <p>一个工厂类还可以包含多个工厂方法，如下面的示例所示：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>serviceLocator<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>examples.DefaultServiceLocator<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- inject any dependencies required by this locator bean --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clientService<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">factory-bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>serviceLocator<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">factory-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createClientServiceInstance<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>accountService<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">factory-bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>serviceLocator<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">factory-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createAccountServiceInstance<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>下面的示例显示了相应的类：</p> <div class="switch-code" data-v-d858fa5c><div data-v-d858fa5c><button class="active" data-v-d858fa5c>Java</button> <button data-v-d858fa5c>Kotlin</button></div> <div class="language-java extra-class" data-v-d858fa5c><pre class="language-java" data-v-d858fa5c><code data-v-d858fa5c><span class="token keyword" data-v-d858fa5c>public</span> <span class="token keyword" data-v-d858fa5c>class</span> <span class="token class-name" data-v-d858fa5c>DefaultServiceLocator</span> <span class="token punctuation" data-v-d858fa5c>{</span>

    <span class="token keyword" data-v-d858fa5c>private</span> <span class="token keyword" data-v-d858fa5c>static</span> <span class="token class-name" data-v-d858fa5c>ClientService</span> clientService <span class="token operator" data-v-d858fa5c>=</span> <span class="token keyword" data-v-d858fa5c>new</span> <span class="token class-name" data-v-d858fa5c>ClientServiceImpl</span><span class="token punctuation" data-v-d858fa5c>(</span><span class="token punctuation" data-v-d858fa5c>)</span><span class="token punctuation" data-v-d858fa5c>;</span>

    <span class="token keyword" data-v-d858fa5c>private</span> <span class="token keyword" data-v-d858fa5c>static</span> <span class="token class-name" data-v-d858fa5c>AccountService</span> accountService <span class="token operator" data-v-d858fa5c>=</span> <span class="token keyword" data-v-d858fa5c>new</span> <span class="token class-name" data-v-d858fa5c>AccountServiceImpl</span><span class="token punctuation" data-v-d858fa5c>(</span><span class="token punctuation" data-v-d858fa5c>)</span><span class="token punctuation" data-v-d858fa5c>;</span>

    <span class="token keyword" data-v-d858fa5c>public</span> <span class="token class-name" data-v-d858fa5c>ClientService</span> <span class="token function" data-v-d858fa5c>createClientServiceInstance</span><span class="token punctuation" data-v-d858fa5c>(</span><span class="token punctuation" data-v-d858fa5c>)</span> <span class="token punctuation" data-v-d858fa5c>{</span>
        <span class="token keyword" data-v-d858fa5c>return</span> clientService<span class="token punctuation" data-v-d858fa5c>;</span>
    <span class="token punctuation" data-v-d858fa5c>}</span>

    <span class="token keyword" data-v-d858fa5c>public</span> <span class="token class-name" data-v-d858fa5c>AccountService</span> <span class="token function" data-v-d858fa5c>createAccountServiceInstance</span><span class="token punctuation" data-v-d858fa5c>(</span><span class="token punctuation" data-v-d858fa5c>)</span> <span class="token punctuation" data-v-d858fa5c>{</span>
        <span class="token keyword" data-v-d858fa5c>return</span> accountService<span class="token punctuation" data-v-d858fa5c>;</span>
    <span class="token punctuation" data-v-d858fa5c>}</span>
<span class="token punctuation" data-v-d858fa5c>}</span>
</code></pre></div> <!----> <div class="content__java" data-v-d858fa5c></div> <div class="content__kotlin" data-v-d858fa5c></div></div> <p>这种方法表明工厂Bean本身可以通过依赖注入(DI)进行管理和配置。参见 <a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-factory-properties-detailed" target="_blank" rel="noopener noreferrer">详细说明依赖关系和配置<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>在 Spring 文档中，<code>factory bean</code>是指在 Spring 容器中配置并通过<a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-factory-class-instance-factory-method" target="_blank" rel="noopener noreferrer">instance<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>或<a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-factory-class-static-factory-method" target="_blank" rel="noopener noreferrer">static<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>工厂方法创建对象的 bean 。相比之下，<code>FactoryBean</code>(注意大写)指的是特定于 Spring 的<a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-factory-extension-factorybean" target="_blank" rel="noopener noreferrer">FactoryBean<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>实现类</p></div> <h3 id="确定-bean-的运行时类型"><a href="#确定-bean-的运行时类型" class="header-anchor">#</a> 确定 Bean 的运行时类型</h3> <p>特定 bean 的运行时类型不是很容易确定的。Bean 元数据定义中的特定的类只是初始类引用，可能与声明的工厂方法组合，或者是可能导致 Bean 的不同运行时类型的<code>FactoryBean</code>类，或者在实例级工厂方法的情况下根本没有设置（改为通过特定的‘factory-Bean`名称进行解析)。此外，AOP 代理可以用基于接口的代理包装 Bean 实例，并对目标 Bean 的实际类型(仅限于其实现的接口）进行有限的公开。</p> <p>要了解特定 Bean 的实际运行时类型，建议使用指定 Bean 名称的<code>BeanFactory.getType</code>调用。这会考虑以上所有情况，并返回<code>BeanFactory.getBean</code>调用将为同一 bean 名称返回的对象类型。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最近更新时间:</span> <span class="time">2020-11-27 11:07:34</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/spring-framework-chinese/core/1.2 beans-basics.html" class="prev">
        1.2. 容器概述
      </a></span> <span class="next"><a href="/spring-framework-chinese/core/1.4 beans-dependencies.html">
        1.4. 依赖
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/spring-framework-chinese/assets/js/app.31346e20.js" defer></script><script src="/spring-framework-chinese/assets/js/2.c2cabe95.js" defer></script><script src="/spring-framework-chinese/assets/js/17.716f59d0.js" defer></script><script src="/spring-framework-chinese/assets/js/3.f6162600.js" defer></script>
  </body>
</html>
