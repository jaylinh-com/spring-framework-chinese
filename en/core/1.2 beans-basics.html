<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1.2. Container Overview | Spring Framework Documentation</title>
    <meta name="generator" content="VuePress 1.5.1">
    <link rel="ico" href="/spring-framework-chinese/logo.png">
    <link rel="shortcut icon" href="/spring-framework-chinese/favicon.ico">
    <meta name="description" content="Spring Framework Documentation">
    <link rel="preload" href="/spring-framework-chinese/assets/css/0.styles.7eb10291.css" as="style"><link rel="preload" href="/spring-framework-chinese/assets/js/app.31346e20.js" as="script"><link rel="preload" href="/spring-framework-chinese/assets/js/2.c2cabe95.js" as="script"><link rel="preload" href="/spring-framework-chinese/assets/js/40.a9d40990.js" as="script"><link rel="preload" href="/spring-framework-chinese/assets/js/3.f6162600.js" as="script"><link rel="prefetch" href="/spring-framework-chinese/assets/js/10.15d6cdab.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/11.2d9333e0.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/12.3e2a595d.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/13.3e3449fc.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/14.c3a4e48b.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/15.9aaae301.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/16.517c5c8f.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/17.716f59d0.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/18.3fe3f1e4.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/19.00a9b370.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/20.7f895621.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/21.07b61294.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/22.ea7165f8.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/23.d851df66.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/24.e6358e68.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/25.6142b10d.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/26.27ddf8e0.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/27.121e1809.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/28.b8ca8ee3.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/29.542272a1.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/30.12e3e3c9.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/31.128d7dfb.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/32.0527b32d.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/33.7ff377bd.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/34.32284ac2.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/35.778d6f14.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/36.49dcd9f5.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/37.225c4f2f.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/38.9bdc97de.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/39.567fb995.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/4.3cbd5c94.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/41.31cda98c.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/42.884e37c8.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/43.a32c22a5.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/44.6b02043a.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/45.8b8f4bb7.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/46.56e7c5a7.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/47.cf9e614d.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/48.a5bce247.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/49.524077c0.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/5.5f012750.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/50.69bec8f0.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/51.9d728f01.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/52.ba1309da.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/53.b507785e.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/54.ccb827c8.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/55.d42c3168.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/56.bbff78c9.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/57.b5c72e00.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/58.3bad314d.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/59.0fa4a1fa.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/6.a8acdbc7.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/60.7d074794.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/61.1b0ef2eb.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/62.9c86e289.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/63.a0bc0d6b.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/64.710fc4a4.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/65.68b6e1c2.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/66.34e2b949.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/7.4717d1fb.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/8.0da25efd.js"><link rel="prefetch" href="/spring-framework-chinese/assets/js/9.ac1a4a27.js">
    <link rel="stylesheet" href="/spring-framework-chinese/assets/css/0.styles.7eb10291.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/spring-framework-chinese/en/" class="home-link router-link-active"><!----> <span class="site-name">Spring Framework Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/spring-framework-chinese/en/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/spring-framework-chinese/en/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/spring-framework-chinese/en/core/" class="nav-link router-link-active">
  Core
</a></div><div class="nav-item"><a href="/spring-framework-chinese/en/testing/" class="nav-link">
  Testing
</a></div><div class="nav-item"><a href="/spring-framework-chinese/en/data-access/" class="nav-link">
  Data Access
</a></div><div class="nav-item"><a href="/spring-framework-chinese/en/web-servlet/" class="nav-link">
  Web Servlet
</a></div><div class="nav-item"><a href="/spring-framework-chinese/en/web-reactive/" class="nav-link">
  Web Reactive
</a></div><div class="nav-item"><a href="/spring-framework-chinese/en/integration/" class="nav-link">
  Integration
</a></div><div class="nav-item"><a href="/spring-framework-chinese/en/languages/" class="nav-link">
  Languages
</a></div><div class="nav-item"><a href="https://github.com/jaylinh-com/spring-framework-chinese" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Switch Languages" class="dropdown-title"><span class="title">Switch Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/spring-framework-chinese/core/1.2 beans-basics.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/spring-framework-chinese/en/core/1.2 beans-basics.html" class="nav-link">
  English
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/spring-framework-chinese/en/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/spring-framework-chinese/en/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/spring-framework-chinese/en/core/" class="nav-link router-link-active">
  Core
</a></div><div class="nav-item"><a href="/spring-framework-chinese/en/testing/" class="nav-link">
  Testing
</a></div><div class="nav-item"><a href="/spring-framework-chinese/en/data-access/" class="nav-link">
  Data Access
</a></div><div class="nav-item"><a href="/spring-framework-chinese/en/web-servlet/" class="nav-link">
  Web Servlet
</a></div><div class="nav-item"><a href="/spring-framework-chinese/en/web-reactive/" class="nav-link">
  Web Reactive
</a></div><div class="nav-item"><a href="/spring-framework-chinese/en/integration/" class="nav-link">
  Integration
</a></div><div class="nav-item"><a href="/spring-framework-chinese/en/languages/" class="nav-link">
  Languages
</a></div><div class="nav-item"><a href="https://github.com/jaylinh-com/spring-framework-chinese" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Switch Languages" class="dropdown-title"><span class="title">Switch Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/spring-framework-chinese/core/1.2 beans-basics.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/spring-framework-chinese/en/core/1.2 beans-basics.html" class="nav-link">
  English
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/spring-framework-chinese/en/core/" class="sidebar-heading clickable router-link-active open"><span>1. Ioc Container</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/spring-framework-chinese/en/core/1.1 beans-introduction.html" class="sidebar-link">1.1 Introduction to the Spring IoC Container and Beans</a></li><li><a href="/spring-framework-chinese/en/core/1.2 beans-basics.html" class="active sidebar-link">1.2. Container Overview</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring-framework-chinese/en/core/1.2 beans-basics.html#_1-2-1-configuration-metadata" class="sidebar-link">1.2.1. Configuration Metadata</a></li><li class="sidebar-sub-header"><a href="/spring-framework-chinese/en/core/1.2 beans-basics.html#_1-2-2-instantiating-a-container" class="sidebar-link">1.2.2. Instantiating a Container</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring-framework-chinese/en/core/1.2 beans-basics.html#composing-xml-based-configuration-metadata" class="sidebar-link">Composing XML-based Configuration Metadata</a></li><li class="sidebar-sub-header"><a href="/spring-framework-chinese/en/core/1.2 beans-basics.html#the-groovy-bean-definition-dsl" class="sidebar-link">The Groovy Bean Definition DSL</a></li></ul></li><li class="sidebar-sub-header"><a href="/spring-framework-chinese/en/core/1.2 beans-basics.html#_1-2-3-using-the-container" class="sidebar-link">1.2.3. Using the Container</a></li></ul></li><li><a href="/spring-framework-chinese/en/core/1.3 beans-definition.html" class="sidebar-link">1.3. Bean Overview</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring-framework-chinese/en/core/1.3 beans-definition.html#_1-3-1-naming-beans" class="sidebar-link">1.3.1. Naming Beans</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring-framework-chinese/en/core/1.3 beans-definition.html#aliasing-a-bean-outside-the-bean-definition" class="sidebar-link">Aliasing a Bean outside the Bean Definition</a></li></ul></li><li class="sidebar-sub-header"><a href="/spring-framework-chinese/en/core/1.3 beans-definition.html#_1-3-2-instantiating-beans" class="sidebar-link">1.3.2. Instantiating Beans</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring-framework-chinese/en/core/1.3 beans-definition.html#instantiation-with-a-constructor" class="sidebar-link">Instantiation with a Constructor</a></li><li class="sidebar-sub-header"><a href="/spring-framework-chinese/en/core/1.3 beans-definition.html#instantiation-with-a-static-factory-method" class="sidebar-link">Instantiation with a Static Factory Method</a></li><li class="sidebar-sub-header"><a href="/spring-framework-chinese/en/core/1.3 beans-definition.html#instantiation-by-using-an-instance-factory-method" class="sidebar-link">Instantiation by Using an Instance Factory Method</a></li><li class="sidebar-sub-header"><a href="/spring-framework-chinese/en/core/1.3 beans-definition.html#determining-a-bean-s-runtime-type" class="sidebar-link">Determining a Bean’s Runtime Type</a></li></ul></li></ul></li><li><a href="/spring-framework-chinese/en/core/1.4 beans-dependencies.html" class="sidebar-link">1.4. Dependencies</a></li><li><a href="/spring-framework-chinese/en/core/1.5 beans-factory-scopes.html" class="sidebar-link">1.5. Bean Scopes</a></li><li><a href="/spring-framework-chinese/en/core/1.6 beans-factory-nature.html" class="sidebar-link">1.6. Customizing the Nature of a Bean</a></li><li><a href="/spring-framework-chinese/en/core/1.7 Bean Definition Inheritance.html" class="sidebar-link">1.7. Bean Definition Inheritance</a></li><li><a href="/spring-framework-chinese/en/core/1.8 Container Extension Points.html" class="sidebar-link">1.8. Container Extension Points</a></li><li><a href="/spring-framework-chinese/en/core/1.9 Annotation-based Container Configuration.html" class="sidebar-link">1.9. Annotation-based Container Configuration</a></li><li><a href="/spring-framework-chinese/en/core/1.10 Classpath Scanning and Managed Components.html" class="sidebar-link">1.10. Classpath Scanning and Managed Components</a></li><li><a href="/spring-framework-chinese/en/core/1.11 Using JSR 330 Standard Annotations.html" class="sidebar-link">1.11. Using JSR 330 Standard Annotations</a></li><li><a href="/spring-framework-chinese/en/core/1.12 Java-based Container Configuration.html" class="sidebar-link">1.12. Java-based Container Configuration</a></li><li><a href="/spring-framework-chinese/en/core/1.13 Environment Abstraction.html" class="sidebar-link">1.13. Environment Abstraction</a></li><li><a href="/spring-framework-chinese/en/core/1.14 Registering a LoadTimeWeaver.html" class="sidebar-link">1.14. Registering a LoadTimeWeaver</a></li><li><a href="/spring-framework-chinese/en/core/1.15 Additional Capabilities of the ApplicationContext.html" class="sidebar-link">1.15. Additional Capabilities of the ApplicationContext</a></li><li><a href="/spring-framework-chinese/en/core/1.16 beans-beanfactory.html" class="sidebar-link">1.16. The BeanFactory</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring-framework-chinese/en/core/1.16 beans-beanfactory.html#beanfactory-还是-applicationcontext" class="sidebar-link">BeanFactory 还是 ApplicationContext</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/spring-framework-chinese/en/core/resources/" class="sidebar-heading clickable"><span>2. Resources</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>3. 验证，数据绑定和类型转换</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>4. Spring 表达式语言</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>5. Spring 和 AOP</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>6. Spring AOP APIs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>7. Null-safety</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>8. 数据缓冲和编解码器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>9. 附录</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_1-2-container-overview"><a href="#_1-2-container-overview" class="header-anchor">#</a> 1.2. Container Overview</h1> <p>The <code>org.springframework.context.ApplicationContext</code> interface represents the Spring IoC container and is responsible for instantiating, configuring, and assembling the beans. The container gets its instructions on what objects to instantiate, configure, and assemble by reading configuration metadata. The configuration metadata is represented in XML, Java annotations, or Java code. It lets you express the objects that compose your application and the rich interdependencies between those objects.</p> <p>Several implementations of the <code>ApplicationContext</code> interface are supplied with Spring. In stand-alone applications, it is common to create an instance of <a href="https://docs.spring.io/spring-framework/docs/5.2.6.RELEASE/javadoc-api/org/springframework/context/support/ClassPathXmlApplicationContext.html" target="_blank" rel="noopener noreferrer">ClassPathXmlApplicationContext<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> or <a href="https://docs.spring.io/spring-framework/docs/5.2.6.RELEASE/javadoc-api/org/springframework/context/support/FileSystemXmlApplicationContext.html" target="_blank" rel="noopener noreferrer">FileSystemXmlApplicationContext<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. While XML has been the traditional format for defining configuration metadata, you can instruct the container to use Java annotations or code as the metadata format by providing a small amount of XML configuration to declaratively enable support for these additional metadata formats.</p> <p>In most application scenarios, explicit user code is not required to instantiate one or more instances of a Spring IoC container. For example, in a web application scenario, a simple eight (or so) lines of boilerplate web descriptor XML in the <code>web.xml</code> file of the application typically suffices (see <a href="/spring-framework-chinese/en/core/context-create/">Convenient ApplicationContext Instantiation for Web Applications</a>). If you use the <a href="https://spring.io/tools" target="_blank" rel="noopener noreferrer">Spring Tools for Eclipse<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (an Eclipse-powered development environment), you can easily create this boilerplate configuration with a few mouse clicks or keystrokes.</p> <p>The following diagram shows a high-level view of how Spring works. Your application classes are combined with configuration metadata so that, after the <code>ApplicationContext</code> is created and initialized, you have a fully configured and executable system or application.</p> <img src="/spring-framework-chinese/images/container-magic.png" alt="Figure 1. The Spring IoC container"> <p><strong>Figure 1. The Spring IoC container</strong></p> <h2 id="_1-2-1-configuration-metadata"><a href="#_1-2-1-configuration-metadata" class="header-anchor">#</a> 1.2.1. Configuration Metadata</h2> <p>As the preceding diagram shows, the Spring IoC container consumes a form of configuration metadata. This configuration metadata represents how you, as an application developer, tell the Spring container to instantiate, configure, and assemble the objects in your application.</p> <p>Configuration metadata is traditionally supplied in a simple and intuitive XML format, which is what most of this chapter uses to convey key concepts and features of the Spring IoC container.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>XML-based metadata is not the only allowed form of configuration metadata. The Spring IoC container itself is totally decoupled from the format in which this configuration metadata is actually written. These days, many developers choose <a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-java" target="_blank" rel="noopener noreferrer">Java-based configuration<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for their Spring applications.</p></div> <p>For information about using other forms of metadata with the Spring container, see:</p> <ul><li><a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-annotation-config" target="_blank" rel="noopener noreferrer">Annotation-based configuration<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: Spring 2.5 introduced support for annotation-based configuration metadata.</li> <li><a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-java" target="_blank" rel="noopener noreferrer">Java-based configuration<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: Starting with Spring 3.0, many features provided by the Spring JavaConfig project became part of the core Spring Framework. Thus, you can define beans external to your application classes by using Java rather than XML files. To use these new features, see the <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Configuration.html" target="_blank" rel="noopener noreferrer">@Configuration<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Bean.html" target="_blank" rel="noopener noreferrer">@Bean<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Import.html" target="_blank" rel="noopener noreferrer">@Import<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, and <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/DependsOn.html" target="_blank" rel="noopener noreferrer">@DependsOn<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> annotations.</li></ul> <p>Spring configuration consists of at least one and typically more than one bean definition that the container must manage. XML-based configuration metadata configures these beans as <code>&lt;bean/&gt;</code> elements inside a top-level <code>&lt;beans/&gt;</code> element. Java configuration typically uses <code>@Bean</code>-annotated methods within a <code>@Configuration</code> class.</p> <p>These bean definitions correspond to the actual objects that make up your application. Typically, you define service layer objects, data access objects (DAOs), presentation objects such as Struts <code>Action</code> instances, infrastructure objects such as Hibernate <code>SessionFactories</code>, JMS <code>Queues</code>, and so forth. Typically, one does not configure fine-grained domain objects in the container, because it is usually the responsibility of DAOs and business logic to create and load domain objects. However, you can use Spring’s integration with AspectJ to configure objects that have been created outside the control of an IoC container. See <a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#aop-atconfigurable" target="_blank" rel="noopener noreferrer">Using AspectJ to dependency-inject domain objects with Spring<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>The following example shows the basic structure of XML-based configuration metadata:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>...<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>...<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>  
        <span class="token comment">&lt;!-- collaborators and configuration for this bean go here --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>...<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>...<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- collaborators and configuration for this bean go here --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- more bean definitions go here --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol><li>The <code>id</code> attribute is a string that identifies the individual bean definition.</li> <li>The <code>class</code> attribute defines the type of the bean and uses the fully qualified
classname.</li></ol> <p>The value of the <code>id</code> attribute refers to collaborating objects. The XML for referring to collaborating objects is not shown in this example. See <a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-dependencies" target="_blank" rel="noopener noreferrer">Dependencies<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for more information.</p> <h2 id="_1-2-2-instantiating-a-container"><a href="#_1-2-2-instantiating-a-container" class="header-anchor">#</a> 1.2.2. Instantiating a Container</h2> <p>The location path or paths supplied to an <code>ApplicationContext</code> constructor are resource strings that let the container load configuration metadata from a variety of external resources, such as the local file system, the Java <code>CLASSPATH</code>, and so on.</p> <div class="switch-code" data-v-d858fa5c><div data-v-d858fa5c><button class="active" data-v-d858fa5c>Java</button> <button data-v-d858fa5c>Kotlin</button></div> <div class="language-java extra-class" data-v-d858fa5c><pre class="language-java" data-v-d858fa5c><code data-v-d858fa5c><span class="token class-name" data-v-d858fa5c>ApplicationContext</span> context <span class="token operator" data-v-d858fa5c>=</span> <span class="token keyword" data-v-d858fa5c>new</span> <span class="token class-name" data-v-d858fa5c>ClassPathXmlApplicationContext</span><span class="token punctuation" data-v-d858fa5c>(</span><span class="token string" data-v-d858fa5c>&quot;services.xml&quot;</span><span class="token punctuation" data-v-d858fa5c>,</span> <span class="token string" data-v-d858fa5c>&quot;daos.xml&quot;</span><span class="token punctuation" data-v-d858fa5c>)</span><span class="token punctuation" data-v-d858fa5c>;</span>
</code></pre></div> <!----> <div class="content__java" data-v-d858fa5c></div> <div class="content__kotlin" data-v-d858fa5c></div></div> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>After you learn about Spring’s IoC container, you may want to know more about Spring’s <code>Resource</code> abstraction (as described in <a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#resources" target="_blank" rel="noopener noreferrer">Resources<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>), which provides a convenient mechanism for reading an InputStream from locations defined in a URI syntax. In particular, <code>Resource</code> paths are used to construct applications contexts, as described in <a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#resources-app-ctx" target="_blank" rel="noopener noreferrer">Application Contexts and Resource Paths<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div> <p>The following example shows the service layer objects (<code>services.xml</code>) configuration file:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- services --&gt;</span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>petStore<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.samples.jpetstore.services.PetStoreServiceImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>accountDao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>accountDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>itemDao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>itemDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!-- additional collaborators and configuration for this bean go here --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- more bean definitions for services go here --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>The following example shows the data access objects daos.xml file:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>accountDao<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.samples.jpetstore.dao.jpa.JpaAccountDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- additional collaborators and configuration for this bean go here --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>itemDao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.samples.jpetstore.dao.jpa.JpaItemDao<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- additional collaborators and configuration for this bean go here --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- more bean definitions for data access objects go here --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>In the preceding example, the service layer consists of the <code>PetStoreServiceImpl</code> class and two data access objects of the types <code>JpaAccountDao</code> and <code>JpaItemDao</code> (based on the JPA Object-Relational Mapping standard). The <code>property name</code> element refers to the name of the JavaBean property, and the <code>ref</code> element refers to the name of another bean definition. This linkage between <code>id</code> and <code>ref</code> elements expresses the dependency between collaborating objects. For details of configuring an object’s dependencies, see <a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-dependencies" target="_blank" rel="noopener noreferrer">Dependencies<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h3 id="composing-xml-based-configuration-metadata"><a href="#composing-xml-based-configuration-metadata" class="header-anchor">#</a> Composing XML-based Configuration Metadata</h3> <p>It can be useful to have bean definitions span multiple XML files. Often, each individual XML configuration file represents a logical layer or module in your architecture.</p> <p>You can use the application context constructor to load bean definitions from all these XML fragments. This constructor takes multiple <code>Resource</code> locations, as was shown in the <a href="https://docs.spring.io/spring/docs/5.2.6.RELEASE/spring-framework-reference/core.html#beans-factory-instantiation" target="_blank" rel="noopener noreferrer">previous section<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Alternatively, use one or more occurrences of the <code>&lt;import/&gt;</code> element to load bean definitions from another file or files. The following example shows how to do so:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>import</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>services.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>import</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>resources/messageSource.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>import</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/resources/themeSource.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bean1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>...<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bean2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>...<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>In the preceding example, external bean definitions are loaded from three files: <code>services.xml</code>, <code>messageSource.xml</code>, and <code>themeSource.xml</code>. All location paths are relative to the definition file doing the importing, so <code>services.xml</code> must be in the same directory or classpath location as the file doing the importing, while <code>messageSource.xml</code> and <code>themeSource.xml</code> must be in a <code>resources</code> location below the location of the importing file. As you can see, a leading slash is ignored. However, given that these paths are relative, it is better form not to use the slash at all. The contents of the files being imported, including the top level <code>&lt;beans/&gt;</code> element, must be valid XML bean definitions, according to the Spring Schema.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>It is possible, but not recommended, to reference files in parent directories using a relative &quot;../&quot; path. Doing so creates a dependency on a file that is outside the current application. In particular, this reference is not recommended for <code>classpath:</code> URLs (for example, <code>classpath:../services.xml</code>), where the runtime resolution process chooses the “nearest” classpath root and then looks into its parent directory. Classpath configuration changes may lead to the choice of a different, incorrect directory.</p> <p>You can always use fully qualified resource locations instead of relative paths: for example, <code>file:C:/config/services.xml</code> or <code>classpath:/config/services</code>.xml. However, be aware that you are coupling your application’s configuration to specific absolute locations. It is generally preferable to keep an indirection for such absolute locations — for example, through &quot;${…​}&quot; placeholders that are resolved against JVM system properties at runtime.</p></div> <p>The namespace itself provides the import directive feature. Further configuration features beyond plain bean definitions are available in a selection of XML namespaces provided by Spring — for example, the <code>context</code> and <code>util</code> namespaces.</p> <h3 id="the-groovy-bean-definition-dsl"><a href="#the-groovy-bean-definition-dsl" class="header-anchor">#</a> The Groovy Bean Definition DSL</h3> <p>As a further example for externalized configuration metadata, bean definitions can also be expressed in Spring’s Groovy Bean Definition DSL, as known from the Grails framework. Typically, such configuration live in a &quot;.groovy&quot; file with the structure shown in the following example:</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>beans <span class="token punctuation">{</span>
    <span class="token function">dataSource</span><span class="token punctuation">(</span>BasicDataSource<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        driverClassName <span class="token operator">=</span> <span class="token string gstring">&quot;org.hsqldb.jdbcDriver&quot;</span>
        url <span class="token operator">=</span> <span class="token string gstring">&quot;jdbc:hsqldb:mem:grailsDB&quot;</span>
        username <span class="token operator">=</span> <span class="token string gstring">&quot;sa&quot;</span>
        password <span class="token operator">=</span> <span class="token string gstring">&quot;&quot;</span>
        settings <span class="token operator">=</span> <span class="token punctuation">[</span>mynew<span class="token punctuation">:</span><span class="token string gstring">&quot;setting&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token function">sessionFactory</span><span class="token punctuation">(</span>SessionFactory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dataSource <span class="token operator">=</span> dataSource
    <span class="token punctuation">}</span>
    <span class="token function">myService</span><span class="token punctuation">(</span>MyService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        nestedBean <span class="token operator">=</span> <span class="token punctuation">{</span> AnotherBean bean <span class="token operator">-&gt;</span>
            dataSource <span class="token operator">=</span> dataSource
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This configuration style is largely equivalent to XML bean definitions and even supports Spring’s XML configuration namespaces. It also allows for importing XML bean definition files through an <code>importBeans</code> directive.</p> <h2 id="_1-2-3-using-the-container"><a href="#_1-2-3-using-the-container" class="header-anchor">#</a> 1.2.3. Using the Container</h2> <p>The <code>ApplicationContext</code> is the interface for an advanced factory capable of maintaining a registry of different beans and their dependencies. By using the method <code>T getBean(String name, Class&lt;T&gt; requiredType)</code>, you can retrieve instances of your beans.</p> <p>The <code>ApplicationContext</code> lets you read bean definitions and access them, as the following example shows:</p> <div class="switch-code" data-v-d858fa5c><div data-v-d858fa5c><button class="active" data-v-d858fa5c>Java</button> <button data-v-d858fa5c>Kotlin</button></div> <div class="language-java extra-class" data-v-d858fa5c><pre class="language-java" data-v-d858fa5c><code data-v-d858fa5c><span class="token comment" data-v-d858fa5c>// create and configure beans</span>
<span class="token class-name" data-v-d858fa5c>ApplicationContext</span> context <span class="token operator" data-v-d858fa5c>=</span> <span class="token keyword" data-v-d858fa5c>new</span> <span class="token class-name" data-v-d858fa5c>ClassPathXmlApplicationContext</span><span class="token punctuation" data-v-d858fa5c>(</span><span class="token string" data-v-d858fa5c>&quot;services.xml&quot;</span><span class="token punctuation" data-v-d858fa5c>,</span> <span class="token string" data-v-d858fa5c>&quot;daos.xml&quot;</span><span class="token punctuation" data-v-d858fa5c>)</span><span class="token punctuation" data-v-d858fa5c>;</span>

<span class="token comment" data-v-d858fa5c>// retrieve configured instance</span>
<span class="token class-name" data-v-d858fa5c>PetStoreService</span> service <span class="token operator" data-v-d858fa5c>=</span> context<span class="token punctuation" data-v-d858fa5c>.</span><span class="token function" data-v-d858fa5c>getBean</span><span class="token punctuation" data-v-d858fa5c>(</span><span class="token string" data-v-d858fa5c>&quot;petStore&quot;</span><span class="token punctuation" data-v-d858fa5c>,</span> <span class="token class-name" data-v-d858fa5c>PetStoreService</span><span class="token punctuation" data-v-d858fa5c>.</span><span class="token keyword" data-v-d858fa5c>class</span><span class="token punctuation" data-v-d858fa5c>)</span><span class="token punctuation" data-v-d858fa5c>;</span>

<span class="token comment" data-v-d858fa5c>// use configured instance</span>
<span class="token class-name" data-v-d858fa5c>List</span><span class="token generics" data-v-d858fa5c><span class="token punctuation" data-v-d858fa5c>&lt;</span><span class="token class-name" data-v-d858fa5c>String</span><span class="token punctuation" data-v-d858fa5c>&gt;</span></span> userList <span class="token operator" data-v-d858fa5c>=</span> service<span class="token punctuation" data-v-d858fa5c>.</span><span class="token function" data-v-d858fa5c>getUsernameList</span><span class="token punctuation" data-v-d858fa5c>(</span><span class="token punctuation" data-v-d858fa5c>)</span><span class="token punctuation" data-v-d858fa5c>;</span>
</code></pre></div> <!----> <div class="content__java" data-v-d858fa5c></div> <div class="content__kotlin" data-v-d858fa5c></div></div> <p>With Groovy configuration, bootstrapping looks very similar. It has a different context implementation class which is Groovy-aware (but also understands XML bean definitions). The following example shows Groovy configuration:</p> <div class="switch-code" data-v-d858fa5c><div data-v-d858fa5c><button class="active" data-v-d858fa5c>Java</button> <button data-v-d858fa5c>Kotlin</button></div> <div class="language-java extra-class" data-v-d858fa5c><pre class="language-java" data-v-d858fa5c><code data-v-d858fa5c><span class="token class-name" data-v-d858fa5c>ApplicationContext</span> context <span class="token operator" data-v-d858fa5c>=</span> <span class="token keyword" data-v-d858fa5c>new</span> <span class="token class-name" data-v-d858fa5c>GenericGroovyApplicationContext</span><span class="token punctuation" data-v-d858fa5c>(</span><span class="token string" data-v-d858fa5c>&quot;services.groovy&quot;</span><span class="token punctuation" data-v-d858fa5c>,</span> <span class="token string" data-v-d858fa5c>&quot;daos.groovy&quot;</span><span class="token punctuation" data-v-d858fa5c>)</span><span class="token punctuation" data-v-d858fa5c>;</span>
</code></pre></div> <!----> <div class="content__java" data-v-d858fa5c></div> <div class="content__kotlin" data-v-d858fa5c></div></div> <p>The most flexible variant is <code>GenericApplicationContext</code> in combination with reader delegates — for example, with <code>XmlBeanDefinitionReader</code> for XML files, as the following example shows:</p> <div class="switch-code" data-v-d858fa5c><div data-v-d858fa5c><button class="active" data-v-d858fa5c>Java</button> <button data-v-d858fa5c>Kotlin</button></div> <div class="language-java extra-class" data-v-d858fa5c><pre class="language-java" data-v-d858fa5c><code data-v-d858fa5c><span class="token class-name" data-v-d858fa5c>GenericApplicationContext</span> context <span class="token operator" data-v-d858fa5c>=</span> <span class="token keyword" data-v-d858fa5c>new</span> <span class="token class-name" data-v-d858fa5c>GenericApplicationContext</span><span class="token punctuation" data-v-d858fa5c>(</span><span class="token punctuation" data-v-d858fa5c>)</span><span class="token punctuation" data-v-d858fa5c>;</span>
<span class="token keyword" data-v-d858fa5c>new</span> <span class="token class-name" data-v-d858fa5c>XmlBeanDefinitionReader</span><span class="token punctuation" data-v-d858fa5c>(</span>context<span class="token punctuation" data-v-d858fa5c>)</span><span class="token punctuation" data-v-d858fa5c>.</span><span class="token function" data-v-d858fa5c>loadBeanDefinitions</span><span class="token punctuation" data-v-d858fa5c>(</span><span class="token string" data-v-d858fa5c>&quot;services.xml&quot;</span><span class="token punctuation" data-v-d858fa5c>,</span> <span class="token string" data-v-d858fa5c>&quot;daos.xml&quot;</span><span class="token punctuation" data-v-d858fa5c>)</span><span class="token punctuation" data-v-d858fa5c>;</span>
context<span class="token punctuation" data-v-d858fa5c>.</span><span class="token function" data-v-d858fa5c>refresh</span><span class="token punctuation" data-v-d858fa5c>(</span><span class="token punctuation" data-v-d858fa5c>)</span><span class="token punctuation" data-v-d858fa5c>;</span>
</code></pre></div> <!----> <div class="content__java" data-v-d858fa5c></div> <div class="content__kotlin" data-v-d858fa5c></div></div> <p>You can also use the <code>GroovyBeanDefinitionReader</code> for Groovy files, as the following example shows:</p> <div class="switch-code" data-v-d858fa5c><div data-v-d858fa5c><button class="active" data-v-d858fa5c>Java</button> <button data-v-d858fa5c>Kotlin</button></div> <div class="language-java extra-class" data-v-d858fa5c><pre class="language-java" data-v-d858fa5c><code data-v-d858fa5c><span class="token class-name" data-v-d858fa5c>GenericApplicationContext</span> context <span class="token operator" data-v-d858fa5c>=</span> <span class="token keyword" data-v-d858fa5c>new</span> <span class="token class-name" data-v-d858fa5c>GenericApplicationContext</span><span class="token punctuation" data-v-d858fa5c>(</span><span class="token punctuation" data-v-d858fa5c>)</span><span class="token punctuation" data-v-d858fa5c>;</span>
<span class="token keyword" data-v-d858fa5c>new</span> <span class="token class-name" data-v-d858fa5c>GroovyBeanDefinitionReader</span><span class="token punctuation" data-v-d858fa5c>(</span>context<span class="token punctuation" data-v-d858fa5c>)</span><span class="token punctuation" data-v-d858fa5c>.</span><span class="token function" data-v-d858fa5c>loadBeanDefinitions</span><span class="token punctuation" data-v-d858fa5c>(</span><span class="token string" data-v-d858fa5c>&quot;services.groovy&quot;</span><span class="token punctuation" data-v-d858fa5c>,</span> <span class="token string" data-v-d858fa5c>&quot;daos.groovy&quot;</span><span class="token punctuation" data-v-d858fa5c>)</span><span class="token punctuation" data-v-d858fa5c>;</span>
context<span class="token punctuation" data-v-d858fa5c>.</span><span class="token function" data-v-d858fa5c>refresh</span><span class="token punctuation" data-v-d858fa5c>(</span><span class="token punctuation" data-v-d858fa5c>)</span><span class="token punctuation" data-v-d858fa5c>;</span>
</code></pre></div> <!----> <div class="content__java" data-v-d858fa5c></div> <div class="content__kotlin" data-v-d858fa5c></div></div> <p>You can mix and match such reader delegates on the same <code>ApplicationContext</code>, reading bean definitions from diverse configuration sources.</p> <p>You can then use <code>getBean</code> to retrieve instances of your beans. The <code>ApplicationContext</code> interface has a few other methods for retrieving beans, but, ideally, your application code should never use them. Indeed, your application code should have no calls to the <code>getBean()</code> method at all and thus have no dependency on Spring APIs at all. For example, Spring’s integration with web frameworks provides dependency injection for various web framework components such as controllers and JSF-managed beans, letting you declare a dependency on a specific bean through metadata (such as an autowiring annotation).</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2020-11-27 11:07:34</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/spring-framework-chinese/en/core/1.1 beans-introduction.html" class="prev">
        1.1 Introduction to the Spring IoC Container and Beans
      </a></span> <span class="next"><a href="/spring-framework-chinese/en/core/1.3 beans-definition.html">
        1.3. Bean Overview
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/spring-framework-chinese/assets/js/app.31346e20.js" defer></script><script src="/spring-framework-chinese/assets/js/2.c2cabe95.js" defer></script><script src="/spring-framework-chinese/assets/js/40.a9d40990.js" defer></script><script src="/spring-framework-chinese/assets/js/3.f6162600.js" defer></script>
  </body>
</html>
